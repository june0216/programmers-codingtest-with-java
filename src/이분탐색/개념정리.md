# 이진 검색

## 이진 검색이란?

- 자료의 가운데에 있는 항목의 카 값과 비교하여 다음 검색 위치를 결정하고 검색을 계속 진행하는 방법
- 선행 조건 == “**자료가 정렬되어 있는 상태**”여야 한다.
- 목적 키를 찾을 때까지 이진 검색을 순환적으로 반복 수행한다.
    - 검색 범위를 반으로 줄여나가면서 보다 빠르게 검색 수행이 가능하다.

## 검색 방법

1) 중앙에 있는 값을 선택

2) 찾고자 하는 숫자보다 크면 중앙을 기준으로 왼쪽이 다음 검색 대상이 되고 찾고자 하는 숫자보다 작다면 오른쪽 범위가 검색의 대상이 된다.

## 동작과정

이진 탐색은 분할 정복 중 한쪽 범위를 아예 버리기 때문에 분할 정복을 이용한 효율 높은 탐색 알고리즘이라고 할 수 있다

### 범위 찾기

주로, 시작 지점은 포함, 끝나는 지점은 포함하지 않는 범위를 사용한다. [start, end)

### 검사 진행하기

- [start, end) 범위 내에 속한 원소 개수는 end-start개이다.
- 탐색 공간이 남아있지 않을 때까지 탐색하려면 end-start가 양수일 떄 탐색을 계속 반복해야한다.
    - end- start > 0 → end > start

### 중간값 비교하기

- 중간값을 구하고 찾는 값과 대소 비교 후 범위를 조절한다/
- value > target은 범위를 작은  쪽으로 좁혀야한다.
    - [start, end) 범위에서 더 작은 범위로 좁히는 경우 start는 이미 작은 범위에 포함되어 있으므로 변경된 범위의 시작 지점도 start 로 유지된다. value가 들어있는 mid에는 target이 들어있지 않는다는 것을 확인했다. 따라서 mid-1까지 포함하는 범위로 좁혀야 한다. 끝 지점은 포함하지 않는 범위 표기법을 사용하고 있으므로, 줄어든 범위는 [start, mid)로 표시된다.

## 정렬 기준 정하기

- 이진 탐색을 진행하려면 배열이 정렬되어 있어야 하고, 많ㅇ느 경우 우리가 직접 데이터를 정렬해야한다.
- 하지만 같은 데이터라고 하더라도 여러 가지 정렬 방법이 있을 수 있다.
    - 오름차순, 내림차순, 사전 순, 자릿 수, 모든 자릿수의 합 순 등 다양한 정렬 방법이 있을 수 있다.

### 정렬 방식 선택하기

- 중간 값과의 정답의 대소를 명확히 구분할 수 있어야 하고, 대소 비교를 하여 정답이 속한 더 작은 범위를 정확히 파악할 수 있어야 한다.

### 정렬 규칙 찾기

- 이진 탐색 문제는 대부분 배열이나 리스트를 주고 원소를 찾기보다는 큰 범위의 정답 후보 중 문제 조건에 맞는 정답을 찾아낼 때가 많다.
    - 이때는 문제에서 요구하는 조건의 검사 결과가 정답 후보의 값에 따라 정렬된 상태가 되는지 확인해보아야한다.
- 이진 탐색은 정확한 값을 찾는 데도 사용되지만, 정답 조건을 만족하는 값 중 가장 큰 값 혹은 가장 작은 값을 찾는 데도 많이 사용되며, 이런 유형의 탐색을 **파라메트릭 서치**라고도 한다.
    - 이 경우 보통 값이 어느 정도 이상 크거나 반대로 어느 정도 이상 작으면 정답 조건을 만족한다.
- 예를 들어, 정렬된 배열에서 10 이상의 값 중 가장 작은 값을 찾는다고 한다.
    - 이때, 중간 값을 찍었을 때 5가 나오면 이 중간 위치는 범위에서 제외되는 것이 맞다.
    - 12가 나와도  10보다 큰 값이므로 이 위치 또한 정답이 될 수 있다. 하지만 배열 앞쪽에 12보다 작고 10보다는 크거나 같은 값이 있을 수 있으니 탐색은 계속해야한다.
- 따라서, 정답 조건을 만족하는 값 중 가장 큰 값이나 가장 작은 값을 쉽게 찾으려면 다음을 고민해야한다.
    - 1) 범위 좁히기
    - 2) 범위 표기법

### 범위 좁히기

- 정확한 값을 찾는 이진 탐색과 다르게 가장 큰 값이나 가장 작은 값을 찾는 이진 탐색에서는 검사한 값이 정답 조건을 만족한다고 하더라도 범위에 포함될 수 있다.
    - ⇒ 따라서 범위를 좁힐 때 이를 반영해야한다.


> ✅  정답 조건을 만족하는 값 중 가장 큰 값을 구하는 경우라면 중간 값을 검사했을 때 정답을 만족하더라도 더 큰 값이 있는지 찾아야  하므로 범위를 큰 쪽으로 좁히되, **검사한 중간 값을 포함해서 좁혀야 한다.**
>
>
> ✅ 정답 조건을 만족하는 값 중 가장 작은 값을 구하는 경우라면 중간 값을 검사했을 때 정답을 만족하더라도 더 작은 값이 있는지 찾아야 하므로 범위를 작은 쪽으로 좁히되, **검사한 중간 값을 포함해서 좁혀야 한다.**
>
- “중간값을 포함해서”의 의미에 대하여

    이진 탐색에서 "검사한 중간 값을 포함해서 좁힌다"는 표현은 혼란을 줄 수 있습니다. 이 표현은 범위 조정 시 중간 값이 포함되는 경우와 포함되지 않는 경우를 구분하는 데 중요합니다. 이해를 돕기 위해 두 가지 상황을 구체적으로 살펴보겠습니다.

    ### 1. 정답 조건을 만족하는 값 중 가장 큰 값 찾기

    이 경우, 중간 값이 조건을 만족하더라도 더 큰 값을 찾기 위해 범위를 좁히는 과정에서 중간 값을 포함시켜야 합니다. 그 이유는 현재 중간 값이 조건을 만족하는 가장 큰 값일 가능성이 있기 때문입니다.

    - **중간 값이 조건을 만족하는 경우:** 이 때 `start = mid`가 아니라 `start = mid + 1`로 설정하는 이유는, 이미 `mid`가 조건을 만족한다는 것을 알고 있기 때문에, 그 다음 큰 값에서 더 큰 값을 찾기 위함입니다. 만약 `start = mid`로 설정한다면, 다음 반복에서도 같은 `mid` 값을 다시 검사하게 되어 비효율적입니다.
    - **중간 값이 조건을 만족하지 않는 경우:** 이 경우 `end = mid - 1`로 설정하여 범위를 줄입니다.

    ### 2. 정답 조건을 만족하는 값 중 가장 작은 값 찾기

    이 경우, 중간 값이 조건을 만족하더라도 더 작은 값을 찾기 위해 범위를 좁히는 과정에서 중간 값을 포함시켜야 합니다. 여기서도 현재 중간 값이 조건을 만족하는 가장 작은 값일 가능성이 있습니다.

    - **중간 값이 조건을 만족하는 경우:** 이때 `end = mid`로 설정합니다. 여기서 `end = mid - 1`로 설정하면, 조건을 만족하는 가장 작은 값이 무시될 수 있습니다.
    - **중간 값이 조건을 만족하지 않는 경우:** 이 경우 `start = mid + 1`로 설정하여 범위를 줄입니다.

    ### 결론

    이진 탐색에서 중간 값을 포함시키는 것은 결과적으로 해당 값이 최종적인 정답일 가능성을 염두에 두고 범위를 조절하는 것입니다. "검사한 중간 값을 포함해서 좁힌다"는 말은, 이 값이 이미 조건을 만족하는 최소 혹은 최대 값일 수 있다는 의미에서 중요합니다. 따라서 `mid` 값이 조건을 만족하는 경우, 그 값을 포함시켜야 할지 여부에 따라 `start`와 `end`의 조정 방식이 달라지는 것입니다.


### 범위 표기법

- 이진 탐색을 진행할 때 찾고자 하는 값에 따른 범위 표기법은 다음과 같다.
    - 찾고자 하는 값에 따라 범위의 마지막 부분을 포함하거나 포함하지 않아야 한다.


        | 찾고자 하는 값 | 범위 표기법 |
        | --- | --- |
        | 정답 조건을 만족하는 값 중 가장 큰 값  | [start, end) |
        | 정답 조건을 만족하는 값 중 가장 작은 값  | [start, end] |
    - 정답 조건을 만족하는 값 중 가장 큰 값
        - 범위를 좁혀나가다가 마지막 2개가 남았을 때 end == start +2
            - 중간값은 start+1을 선택한다.
            - 중간 값이 정답 조건을 만족한다면 중간 값을 포함하여 큰 값이 들어 있는 범위인 [start + 1, end) 를 선택하고, 범위 안에는 하나의 값만 남아 정답을 구할 수 있다.
            - 정답 조건을 만족하지 않더라도 end 가 start +1로 좁혀지면서 하나의 값만 남게 된다.
    - 정답 조건을 만족하는 값 중 가장 작은 값
        - 이 경우 범위에 2개의 값이 남아있을 때 (end == start +1) 중간값은 start를 선택한다.
        - 이 값이 정답 조건을 만족한다면 중간값을 포함하여 작은 값이 들어 있는 범위인 [start, start]를 선택하게 되고, 범위 안에는 하나의 값만 남는다.
        - 반대로 정답 조건을 만족하지 않는다면 큰 값이 들어 있는 범위인 [start + 1, end] 로 좁혀지면서 하나의 값만 남는다.

## 알고리즘

- 반복구조
    - 자료의 삽입, 삭제 발생시 배열의 상태를 항상 정렬 상태로 유지하는 추가 작업이 필요하다.
- 재귀 구조

### 분할 정복 사례

- 병합 정렬
    - 외부 정렬의 기본이 되는 정렬 알고리즘
- 퀵 정렬
- 최근접 점의 쌍 문제에 분할 정복 적용 가능
    - 2차원 평면 상의 n개의 점이 입력으로 주어질 때 거리가 가장 가까운 점 찾기 가능

## 파라메트릭 서치

> 💖 떠올리는 포인트!
>
>
> *`모든 경우를 따져서 최적의 해를 구하는 것은 어렵다.`*
>
>  *`-> 반대로 해를 x라고 생각하고 x를 만족하는 경우가 있는지 확인해보자`*
>
> → 이때, mid값은 정답(해)라고 생각한다.
>
> [방법]
>
> 이것이 가능한가?를 보기 위해서는 일반적으로 완전 탐색을 하는 방법을 떠올려보기! 생각보다 간단할 수 있다.
>
- 단순히 정렬된 배열 안에서 원소를 찾는 이분 탐색을 응용하여 **`최적화 문제`**를 **`결정 문제`**로 바꾸어 풀 수 있다.
    - 최적화 문제
        - f(x) = True가 되는 x의 최대값을 구해라
    - 결정 문제
        - 어떤 x에서 f(x) = True가 되는가
- 가능한 모든 x값마다 f(x)가 True인지 검사하여 True중에서 최소, 최대값을 고르면 최적화 문제를 결정 문제로 풀 수 있다.
- 예를 들어,
    - x1 < x2이고
    - f(x1) = True 이면 f(x2) = True 또는 f(x2) = True 이면 f(x1) = True라는 조건을 만족하면 f(x)의 결과값이 정렬된 형태이기 때문에 이분 탐색 아이디어를 적용하여 문제를 풀 수 있다.

### 예시 문제

<aside>
💡 n개의 섬과 m개의 다리가 있다. 다리마다 무게제한이 (1 ≤ 제한 ≤ 10^9)이 있어서 제한보다 무거운 차량이 지나가면 다리가 무너진다.

1번 섬에서 n번 섬으로 이동할 수 있는 차량의 무게의 최댓값은 얼마인가?

</aside>

- 알고리즘
    - Prim, Union-Find, Parametric Search 등이 있다.

- 여기서 Parametric Search으로 풀자면
    - 만약 무게가 i인 차량이 1번섬에서 n번 섬으로 이동할 수 있다면 그 길을 그대로 따라서 i보다 가벼운 차량도 이동할 수 있다.
    - 만약 무게가 i인 차량이 1번 섬에서 n번 섬으로 이동할 수 없다면 x보다 무거운 차량도 이동할 수 없다.

- 무게 제한이 1이상 10^9이하 이므로 → 1보다 가벼운 차량과 10^9보다 무거운 차량의 이동 여부는 조사할 필요가 없다.
    - → 따라서 탐색 범위를 1이상 10^9이하로 두고 이분 탐색을 하면 된다.